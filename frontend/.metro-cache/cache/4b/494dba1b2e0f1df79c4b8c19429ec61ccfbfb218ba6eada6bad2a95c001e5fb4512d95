{"dependencies":[{"name":"../errors/index.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":117,"index":117},"end":{"line":1,"column":146,"index":146}}],"key":"aqnUNcJez9T6Vwi7CCnt6YPZPeQ=","exportNames":["*"],"imports":1}},{"name":"../model/index.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":158,"index":158},"end":{"line":1,"column":186,"index":186}}],"key":"OO3FzQjE50DFRNHAWhQ5U3GxKvA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: !0\n  }), exports.SemanticPreEncoder = void 0;\n  var index_js_1 = require(_dependencyMap[0], \"../errors/index.js\"),\n    index_js_2 = require(_dependencyMap[1], \"../model/index.js\"),\n    SemanticPreEncoder = function () {\n      function e() {}\n      return e.process = function (e, r) {\n        var s = e.gvl;\n        if (!s) throw new index_js_1.EncodingError(\"Unable to encode TCModel without a GVL\");\n        if (!s.isReady) throw new index_js_1.EncodingError(\"Unable to encode TCModel tcModel.gvl.readyPromise is not resolved\");\n        (e = e.clone()).consentLanguage = s.language.toUpperCase(), (null == r ? void 0 : r.version) > 0 && (null == r ? void 0 : r.version) <= this.processor.length ? e.version = r.version : e.version = this.processor.length;\n        var n = e.version - 1;\n        if (!this.processor[n]) throw new index_js_1.EncodingError(\"Invalid version: \".concat(e.version));\n        return this.processor[n](e, s);\n      }, e.processor = [function (e) {\n        return e;\n      }, function (e, r) {\n        e.publisherRestrictions.gvl = r, e.purposeLegitimateInterests.unset(1);\n        var s = new Map();\n        return s.set(\"legIntPurposes\", e.vendorLegitimateInterests), s.set(\"purposes\", e.vendorConsents), s.forEach(function (s, n) {\n          s.forEach(function (o, t) {\n            if (o) {\n              var i = r.vendors[t];\n              if (!i || i.deletedDate) s.unset(t);else if (0 === i[n].length) if (\"legIntPurposes\" === n && 0 === i.purposes.length && 0 === i.legIntPurposes.length && i.specialPurposes.length > 0) ;else if (e.isServiceSpecific) {\n                if (0 === i.flexiblePurposes.length) s.unset(t);else {\n                  for (var c = e.publisherRestrictions.getRestrictions(t), l = !1, d = 0, u = c.length; d < u && !l; d++) l = c[d].restrictionType === index_js_2.RestrictionType.REQUIRE_CONSENT && \"purposes\" === n || c[d].restrictionType === index_js_2.RestrictionType.REQUIRE_LI && \"legIntPurposes\" === n;\n                  l || s.unset(t);\n                }\n              } else s.unset(t);\n            }\n          });\n        }), e.vendorsDisclosed.set(r.vendors), e;\n      }], e;\n    }();\n  exports.SemanticPreEncoder = SemanticPreEncoder;\n});","lineCount":40,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,19],[4,9,1,20,"defineProperty"],[4,23,1,34],[4,24,1,35,"exports"],[4,31,1,42],[4,33,1,43],[4,45,1,55],[4,47,1,56],[5,4,1,57,"value"],[5,9,1,62],[5,11,1,63],[5,12,1,64],[6,2,1,65],[6,3,1,66],[6,4,1,67],[6,6,1,68,"exports"],[6,13,1,75],[6,14,1,76,"SemanticPreEncoder"],[6,32,1,94],[6,35,1,95],[6,40,1,100],[6,41,1,101],[7,2,1,102],[7,6,1,106,"index_js_1"],[7,16,1,116],[7,19,1,117,"require"],[7,26,1,124],[7,27,1,124,"_dependencyMap"],[7,41,1,124],[7,66,1,145],[7,67,1,146],[8,4,1,147,"index_js_2"],[8,14,1,157],[8,17,1,158,"require"],[8,24,1,165],[8,25,1,165,"_dependencyMap"],[8,39,1,165],[8,63,1,185],[8,64,1,186],[9,4,1,187,"SemanticPreEncoder"],[9,22,1,205],[9,25,1,206],[9,37,1,216],[10,6,1,217],[10,15,1,226,"e"],[10,16,1,227,"e"],[10,17,1,227],[10,19,1,229],[10,20,1,230],[11,6,1,231],[11,13,1,238,"e"],[11,14,1,239],[11,15,1,240,"process"],[11,22,1,247],[11,25,1,248],[11,35,1,257,"e"],[11,36,1,258],[11,38,1,259,"r"],[11,39,1,260],[11,41,1,261],[12,8,1,262],[12,12,1,266,"s"],[12,13,1,267],[12,16,1,268,"e"],[12,17,1,269],[12,18,1,270,"gvl"],[12,21,1,273],[13,8,1,274],[13,12,1,277],[13,13,1,278,"s"],[13,14,1,279],[13,16,1,280],[13,22,1,286],[13,26,1,290,"index_js_1"],[13,36,1,300],[13,37,1,301,"EncodingError"],[13,50,1,314],[13,51,1,315],[13,91,1,355],[13,92,1,356],[14,8,1,357],[14,12,1,360],[14,13,1,361,"s"],[14,14,1,362],[14,15,1,363,"isReady"],[14,22,1,370],[14,24,1,371],[14,30,1,377],[14,34,1,381,"index_js_1"],[14,44,1,391],[14,45,1,392,"EncodingError"],[14,58,1,405],[14,59,1,406],[14,126,1,473],[14,127,1,474],[15,8,1,475],[15,9,1,476,"e"],[15,10,1,477],[15,13,1,478,"e"],[15,14,1,479],[15,15,1,480,"clone"],[15,20,1,485],[15,21,1,486],[15,22,1,487],[15,24,1,489,"consentLanguage"],[15,39,1,504],[15,42,1,505,"s"],[15,43,1,506],[15,44,1,507,"language"],[15,52,1,515],[15,53,1,516,"toUpperCase"],[15,64,1,527],[15,65,1,528],[15,66,1,529],[15,68,1,530],[15,69,1,531],[15,73,1,535],[15,77,1,537,"r"],[15,78,1,538],[15,81,1,539],[15,86,1,544],[15,87,1,545],[15,90,1,546,"r"],[15,91,1,547],[15,92,1,548,"version"],[15,99,1,555],[15,103,1,557],[15,104,1,558],[15,108,1,560],[15,109,1,561],[15,113,1,565],[15,117,1,567,"r"],[15,118,1,568],[15,121,1,569],[15,126,1,574],[15,127,1,575],[15,130,1,576,"r"],[15,131,1,577],[15,132,1,578,"version"],[15,139,1,585],[15,144,1,588],[15,148,1,592],[15,149,1,593,"processor"],[15,158,1,602],[15,159,1,603,"length"],[15,165,1,609],[15,168,1,610,"e"],[15,169,1,611],[15,170,1,612,"version"],[15,177,1,619],[15,180,1,620,"r"],[15,181,1,621],[15,182,1,622,"version"],[15,189,1,629],[15,192,1,630,"e"],[15,193,1,631],[15,194,1,632,"version"],[15,201,1,639],[15,204,1,640],[15,208,1,644],[15,209,1,645,"processor"],[15,218,1,654],[15,219,1,655,"length"],[15,225,1,661],[16,8,1,662],[16,12,1,666,"n"],[16,13,1,667],[16,16,1,668,"e"],[16,17,1,669],[16,18,1,670,"version"],[16,25,1,677],[16,28,1,678],[16,29,1,679],[17,8,1,680],[17,12,1,683],[17,13,1,684],[17,17,1,688],[17,18,1,689,"processor"],[17,27,1,698],[17,28,1,699,"n"],[17,29,1,700],[17,30,1,701],[17,32,1,702],[17,38,1,708],[17,42,1,712,"index_js_1"],[17,52,1,722],[17,53,1,723,"EncodingError"],[17,66,1,736],[17,67,1,737],[17,86,1,756],[17,87,1,757,"concat"],[17,93,1,763],[17,94,1,764,"e"],[17,95,1,765],[17,96,1,766,"version"],[17,103,1,773],[17,104,1,774],[17,105,1,775],[18,8,1,776],[18,15,1,783],[18,19,1,787],[18,20,1,788,"processor"],[18,29,1,797],[18,30,1,798,"n"],[18,31,1,799],[18,32,1,800],[18,33,1,801,"e"],[18,34,1,802],[18,36,1,803,"s"],[18,37,1,804],[18,38,1,805],[19,6,1,805],[19,7,1,806],[19,9,1,807,"e"],[19,10,1,808],[19,11,1,809,"processor"],[19,20,1,818],[19,23,1,819],[19,24,1,820],[19,34,1,829,"e"],[19,35,1,830],[19,37,1,831],[20,8,1,832],[20,15,1,839,"e"],[20,16,1,840],[21,6,1,840],[21,7,1,841],[21,9,1,842],[21,19,1,851,"e"],[21,20,1,852],[21,22,1,853,"r"],[21,23,1,854],[21,25,1,855],[22,8,1,856,"e"],[22,9,1,857],[22,10,1,858,"publisherRestrictions"],[22,31,1,879],[22,32,1,880,"gvl"],[22,35,1,883],[22,38,1,884,"r"],[22,39,1,885],[22,41,1,886,"e"],[22,42,1,887],[22,43,1,888,"purposeLegitimateInterests"],[22,69,1,914],[22,70,1,915,"unset"],[22,75,1,920],[22,76,1,921],[22,77,1,922],[22,78,1,923],[23,8,1,924],[23,12,1,928,"s"],[23,13,1,929],[23,16,1,930],[23,20,1,934,"Map"],[23,23,1,937],[23,24,1,936],[23,25,1,937],[24,8,1,938],[24,15,1,945,"s"],[24,16,1,946],[24,17,1,947,"set"],[24,20,1,950],[24,21,1,951],[24,37,1,967],[24,39,1,968,"e"],[24,40,1,969],[24,41,1,970,"vendorLegitimateInterests"],[24,66,1,995],[24,67,1,996],[24,69,1,997,"s"],[24,70,1,998],[24,71,1,999,"set"],[24,74,1,1002],[24,75,1,1003],[24,85,1,1013],[24,87,1,1014,"e"],[24,88,1,1015],[24,89,1,1016,"vendorConsents"],[24,103,1,1030],[24,104,1,1031],[24,106,1,1032,"s"],[24,107,1,1033],[24,108,1,1034,"forEach"],[24,115,1,1041],[24,116,1,1043],[24,126,1,1052,"s"],[24,127,1,1053],[24,129,1,1054,"n"],[24,130,1,1055],[24,132,1,1056],[25,10,1,1057,"s"],[25,11,1,1058],[25,12,1,1059,"forEach"],[25,19,1,1066],[25,20,1,1068],[25,30,1,1077,"o"],[25,31,1,1078],[25,33,1,1079,"t"],[25,34,1,1080],[25,36,1,1081],[26,12,1,1082],[26,16,1,1085,"o"],[26,17,1,1086],[26,19,1,1087],[27,14,1,1088],[27,18,1,1092,"i"],[27,19,1,1093],[27,22,1,1094,"r"],[27,23,1,1095],[27,24,1,1096,"vendors"],[27,31,1,1103],[27,32,1,1104,"t"],[27,33,1,1105],[27,34,1,1106],[28,14,1,1107],[28,18,1,1110],[28,19,1,1111,"i"],[28,20,1,1112],[28,24,1,1114,"i"],[28,25,1,1115],[28,26,1,1116,"deletedDate"],[28,37,1,1127],[28,39,1,1128,"s"],[28,40,1,1129],[28,41,1,1130,"unset"],[28,46,1,1135],[28,47,1,1136,"t"],[28,48,1,1137],[28,49,1,1138],[28,50,1,1139],[28,55,1,1144],[28,59,1,1147],[28,60,1,1148],[28,65,1,1151,"i"],[28,66,1,1152],[28,67,1,1153,"n"],[28,68,1,1154],[28,69,1,1155],[28,70,1,1156,"length"],[28,76,1,1162],[28,78,1,1163],[28,82,1,1166],[28,98,1,1182],[28,103,1,1185,"n"],[28,104,1,1186],[28,108,1,1188],[28,109,1,1189],[28,114,1,1192,"i"],[28,115,1,1193],[28,116,1,1194,"purposes"],[28,124,1,1202],[28,125,1,1203,"length"],[28,131,1,1209],[28,135,1,1211],[28,136,1,1212],[28,141,1,1215,"i"],[28,142,1,1216],[28,143,1,1217,"legIntPurposes"],[28,157,1,1231],[28,158,1,1232,"length"],[28,164,1,1238],[28,168,1,1240,"i"],[28,169,1,1241],[28,170,1,1242,"specialPurposes"],[28,185,1,1257],[28,186,1,1258,"length"],[28,192,1,1264],[28,195,1,1265],[28,196,1,1266],[28,198,1,1267],[28,199,1,1268],[28,204,1,1273],[28,208,1,1276,"e"],[28,209,1,1277],[28,210,1,1278,"isServiceSpecific"],[28,227,1,1295],[29,16,1,1296],[29,20,1,1299],[29,21,1,1300],[29,26,1,1303,"i"],[29,27,1,1304],[29,28,1,1305,"flexiblePurposes"],[29,44,1,1321],[29,45,1,1322,"length"],[29,51,1,1328],[29,53,1,1329,"s"],[29,54,1,1330],[29,55,1,1331,"unset"],[29,60,1,1336],[29,61,1,1337,"t"],[29,62,1,1338],[29,63,1,1339],[29,64,1,1340],[29,69,1,1344],[30,18,1,1345],[30,23,1,1349],[30,27,1,1353,"c"],[30,28,1,1354],[30,31,1,1355,"e"],[30,32,1,1356],[30,33,1,1357,"publisherRestrictions"],[30,54,1,1378],[30,55,1,1379,"getRestrictions"],[30,70,1,1394],[30,71,1,1395,"t"],[30,72,1,1396],[30,73,1,1397],[30,75,1,1398,"l"],[30,76,1,1399],[30,79,1,1400],[30,80,1,1401],[30,81,1,1402],[30,83,1,1403,"d"],[30,84,1,1404],[30,87,1,1405],[30,88,1,1406],[30,90,1,1407,"u"],[30,91,1,1408],[30,94,1,1409,"c"],[30,95,1,1410],[30,96,1,1411,"length"],[30,102,1,1417],[30,104,1,1418,"d"],[30,105,1,1419],[30,108,1,1420,"u"],[30,109,1,1421],[30,113,1,1423],[30,114,1,1424,"l"],[30,115,1,1425],[30,117,1,1426,"d"],[30,118,1,1427],[30,120,1,1429],[30,122,1,1430,"l"],[30,123,1,1431],[30,126,1,1432,"c"],[30,127,1,1433],[30,128,1,1434,"d"],[30,129,1,1435],[30,130,1,1436],[30,131,1,1437,"restrictionType"],[30,146,1,1452],[30,151,1,1455,"index_js_2"],[30,161,1,1465],[30,162,1,1466,"RestrictionType"],[30,177,1,1481],[30,178,1,1482,"REQUIRE_CONSENT"],[30,193,1,1497],[30,197,1,1499],[30,207,1,1509],[30,212,1,1512,"n"],[30,213,1,1513],[30,217,1,1515,"c"],[30,218,1,1516],[30,219,1,1517,"d"],[30,220,1,1518],[30,221,1,1519],[30,222,1,1520,"restrictionType"],[30,237,1,1535],[30,242,1,1538,"index_js_2"],[30,252,1,1548],[30,253,1,1549,"RestrictionType"],[30,268,1,1564],[30,269,1,1565,"REQUIRE_LI"],[30,279,1,1575],[30,283,1,1577],[30,299,1,1593],[30,304,1,1596,"n"],[30,305,1,1597],[31,18,1,1598,"l"],[31,19,1,1599],[31,23,1,1601,"s"],[31,24,1,1602],[31,25,1,1603,"unset"],[31,30,1,1608],[31,31,1,1609,"t"],[31,32,1,1610],[31,33,1,1611],[32,16,1,1611],[33,14,1,1612],[33,21,1,1617,"s"],[33,22,1,1618],[33,23,1,1619,"unset"],[33,28,1,1624],[33,29,1,1625,"t"],[33,30,1,1626],[33,31,1,1627],[34,12,1,1627],[35,10,1,1628],[35,11,1,1630],[35,12,1,1631],[36,8,1,1631],[36,9,1,1633],[36,10,1,1634],[36,12,1,1635,"e"],[36,13,1,1636],[36,14,1,1637,"vendorsDisclosed"],[36,30,1,1653],[36,31,1,1654,"set"],[36,34,1,1657],[36,35,1,1658,"r"],[36,36,1,1659],[36,37,1,1660,"vendors"],[36,44,1,1667],[36,45,1,1668],[36,47,1,1669,"e"],[36,48,1,1670],[37,6,1,1670],[37,7,1,1671],[37,8,1,1672],[37,10,1,1673,"e"],[37,11,1,1674],[38,4,1,1674],[38,5,1,1675],[38,6,1,1676],[38,7,1,1677],[39,2,1,1678,"exports"],[39,9,1,1685],[39,10,1,1686,"SemanticPreEncoder"],[39,28,1,1704],[39,31,1,1705,"SemanticPreEncoder"],[39,49,1,1723],[40,0,1,1724],[40,3]],"functionMap":{"names":["<global>","<anonymous>","e","e.process","s.forEach$argument_0"],"mappings":"AAA,8MC,WC,cD,iBE,8iBF,6OG,6kBH,2CD"},"hasCjsExports":true},"type":"js/module"}]}